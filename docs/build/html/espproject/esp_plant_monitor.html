<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.7 Plant Monitor &mdash; SunFounder Euler Kit for Raspberry Pi Pico 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://ezblock.cc/readDocFile/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="https://ezblock.cc/readDocFile/custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="For Arduino User" href="../cproject/for_arduino_user.html" />
    <link rel="prev" title="1.6 Electronic Piano" href="esp_piano.html" /> 
</head>

<body class="wy-body-for-nav">
<nav id="nav-bar">
  <ul class="nav-bar-items" id="nav-bar-items">
    <li class="nav-bar-logo">
      <a href="https://sunfounder.com">
        <img class="logo-img" src="https://ezblock.cc/readDocFile/sunfounder_LOGO_160x@2x.png"/>
      </a>
    </li>
  </ul>
</nav>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SunFounder Euler Kit for Raspberry Pi Pico
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction_to_raspberry_pi_pico.html">Introduction to Raspberry Pi Pico</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download_the_code.html">Download the Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bc_basic_circuit.html">Electronic Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pyproject/for_micropython_user.html">For MicroPython User</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="for_esp8266_user.html">Play Pico with APP</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="esp_basic_function.html">1.1 First-time Use the APP</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_explan.html">1.2 How <code class="docutils literal notranslate"><span class="pre">ws_test.py</span></code> Works?</a></li>
<li class="toctree-l2"><a class="reference internal" href="transfer_data.html">1.3 What Data is Transferred between APP &amp; PicoÔºü</a></li>
<li class="toctree-l2"><a class="reference internal" href="esp_input.html">1.4 APP Display Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="esp_output.html">1.5 APP Actuator Widgets</a></li>
<li class="toctree-l2"><a class="reference internal" href="esp_piano.html">1.6 Electronic Piano</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.7 Plant Monitor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cproject/for_arduino_user.html">For Arduino User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../piperproject/for_piper.html">For Piper Make</a></li>
<li class="toctree-l1"><a class="reference internal" href="../component/what_is_included_in_this_kit.html">What is Included in This Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SunFounder Euler Kit for Raspberry Pi Pico</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="for_esp8266_user.html">Play Pico with APP</a></li>
      <li class="breadcrumb-item active">1.7 Plant Monitor</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/espproject/esp_plant_monitor.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hello, welcome to the SunFounder Raspberry Pi &amp; Arduino &amp; ESP32 Enthusiasts Community on Facebook! Dive deeper into Raspberry Pi, Arduino, and ESP32 with fellow enthusiasts.</p>
<p><strong>Why Join?</strong></p>
<ul class="simple">
<li><p><strong>Expert Support</strong>: Solve post-sale issues and technical challenges with help from our community and team.</p></li>
<li><p><strong>Learn &amp; Share</strong>: Exchange tips and tutorials to enhance your skills.</p></li>
<li><p><strong>Exclusive Previews</strong>: Get early access to new product announcements and sneak peeks.</p></li>
<li><p><strong>Special Discounts</strong>: Enjoy exclusive discounts on our newest products.</p></li>
<li><p><strong>Festive Promotions and Giveaways</strong>: Take part in giveaways and holiday promotions.</p></li>
</ul>
<p>üëâ Ready to explore and create with us? Click [<a href="https://bit.ly/raphaelkit" target="_blank">here</a>] and join today!</p>
</div>
<section id="plant-monitor">
<h1>1.7 Plant Monitor<a class="headerlink" href="#plant-monitor" title="Permalink to this heading">¬∂</a></h1>
<p><img alt="sc_img_plant_monitor" src="../_images/sc_img_plant_monitor.jpg" /></p>
<p>This is a smart watering system, it will detect the current temperature and humidity of the environment and show them on the SunFounder Controller.
When you press the pump button on the APP, it will replenish water for the plants. When it reaches a certain position (detected by water level sensor), it will stop pumping automatically.</p>
<ol class="arabic">
<li><p>Build the circuit.</p>
<blockquote>
<div><p><a class="reference internal" href="../_images/wiring_esp8266_plant_monitor.png"><img alt="wiring_app_plant_monitor" src="../_images/wiring_esp8266_plant_monitor.png" style="width: 800px;" /></a></p>
</div></blockquote>
</li>
<li><p>Create a new controller, add the following widgets and change their names.</p>
<blockquote>
<div><p><img alt="sc_app_plant_monitor" src="../_images/sc_app_plant_monitor_2.jpg" /></p>
</div></blockquote>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">1.7_ws_plant_monitor.py</span></code>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">1.7_ws_plant_monitor.py</span></code> file under the path of <code class="docutils literal notranslate"><span class="pre">euler-kit/esp8266</span></code>.</p></li>
<li><p>Don‚Äôt forget to click on the ‚ÄúMicroPython (Raspberry Pi Pico)‚Äù interpreter in the bottom right corner.</p></li>
</ul>
</div>
<ul class="simple">
<li><p>For detailed tutorials, please refer to <a class="reference internal" href="../pyproject/python_start/quick_guide_thonny.html#open-run-code-py"><span class="std std-ref">Open and Run Code Directly</span></a>.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Each time you rerun the code, you need to connect your device‚Äôs Wi-Fi to <code class="docutils literal notranslate"><span class="pre">my_esp8266</span></code>, then turn on SunFounder Controller and reconnect.</p></li>
<li><p>After clicking the <strong>Run/Stop</strong> button in the upper right corner. You will see the current temperature, humidity and water level value on the SunFounder controller. When you press the pump button on the APP, it will replenish water for the plants.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the motor is still spinning after you click the Stop button, you need to reset the <strong>RUN</strong> pin on the Pico with a wire to GND at this time, and then unplug this wire to run the code again.</p></li>
<li><p>This is because the motor is operating with too much current, which may cause the Pico to disconnect from the computer.</p></li>
</ul>
<p><img alt="wiring_run_reset" src="../_images/wiring_run_reset.png" /></p>
</div>
<p><strong>How it works?</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">on_receive</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>

    <span class="c1"># input</span>
    <span class="c1"># show dht11 message</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">sensor</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">temperature</span>
        <span class="n">ws</span><span class="o">.</span><span class="n">send_dict</span><span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">humidity</span>
        <span class="n">ws</span><span class="o">.</span><span class="n">send_dict</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># show water level sensor message</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">water_sensor</span><span class="o">.</span><span class="n">read_u16</span><span class="p">()</span>
    <span class="n">ws</span><span class="o">.</span><span class="n">send_dict</span><span class="p">[</span><span class="s1">&#39;P&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># output</span>
    <span class="c1"># start pumping</span>
    <span class="k">if</span> <span class="s1">&#39;M&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">value</span><span class="o">&lt;</span><span class="mi">15000</span><span class="p">:</span>
        <span class="n">motor1A</span><span class="o">.</span><span class="n">high</span><span class="p">()</span>
        <span class="n">motor2A</span><span class="o">.</span><span class="n">low</span><span class="p">()</span>

    <span class="c1"># stop pumping</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">&gt;=</span><span class="mi">15000</span> <span class="ow">or</span> <span class="s1">&#39;M&#39;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">motor1A</span><span class="o">.</span><span class="n">low</span><span class="p">()</span>
        <span class="n">motor2A</span><span class="o">.</span><span class="n">low</span><span class="p">()</span>

<span class="n">ws</span><span class="o">.</span><span class="n">on_receive</span> <span class="o">=</span> <span class="n">on_receive</span>
</pre></div>
</div>
<p>Here, the <code class="docutils literal notranslate"><span class="pre">on_receive()</span></code> function can be divided into 3 parts.</p>
<ul class="simple">
<li><p><strong>start pumping</strong>: When the button in area <strong>G</strong> is pressed, let the pump start working.</p></li>
<li><p><strong>show dht11 message</strong>: Show the temperature and humidity on the widgets in area C and area B respectively.</p></li>
<li><p><strong>show water level sensor message</strong>: The water level message is displayed on the widget in area <strong>P</strong>. When the water level message is greater than 10000, let the pump stop working.</p></li>
</ul>
<p><strong>Learn More</strong></p>
<p>If you want Pico to run this <code class="docutils literal notranslate"><span class="pre">1.7_ws_plant_monitor.py</span></code> file automatically after booting, refer to the following steps.</p>
<ol class="arabic">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">1.7_ws_plant_monitor.py</span></code> file under the path of <code class="docutils literal notranslate"><span class="pre">euler-kit/esp8266</span></code>, then click <strong>File</strong> -&gt; <strong>Save as</strong>.</p>
<blockquote>
<div><p><img alt="sc_save_plant_as" src="../_images/save_plant_as.png" /></p>
</div></blockquote>
</li>
<li><p>Select <strong>Raspberry Pi Pico</strong>.</p>
<blockquote>
<div><p><img alt="mps_sec_pico" src="../_images/sec_pico.png" /></p>
</div></blockquote>
</li>
<li><p>Set it name to <code class="docutils literal notranslate"><span class="pre">main.py</span></code>, this way the Raspberry Pi Pico will run this code automatically.</p>
<blockquote>
<div><p><img alt="sc_save_main" src="../_images/save_main.png" /></p>
</div></blockquote>
</li>
</ol>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="esp_piano.html" class="btn btn-neutral float-left" title="1.6 Electronic Piano" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cproject/for_arduino_user.html" class="btn btn-neutral float-right" title="For Arduino User" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, SunFounder.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>